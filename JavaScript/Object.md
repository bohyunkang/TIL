# 객체

## 1. 객체(object)는 무엇일까?

자바스크립트의 가장 기초적인 자료형은 객체이다. 자바스크립트에서 거의 모든 것은 객체이다. 심지어 문자열(string), 수치형(number), 불린(boolean)도 객체처럼 구현되어 있다. 문자열, 수치형, 불린은 불변경 객체(immutable object)라고 한다. 즉 내용을 변경할 수 없지만 어쨌든 객체라는 의미이다.

그렇다면 객체는 무엇일까? 객체는 그 이름에서 볼 수 있듯이, 객체 지향 기술의 핵심 개념이다. 객체는 실제 세상에 존재하는 사물을 모델링한 것이다. 객체는 데이터와 동작을 가지고 있다. 객체의 데이터(data)는 객체가 가지고 있는 특성값이다. 예를 들어 자동차는 모델, 제조사, 마력, 색상, 속도, 연식, 연비, 주행거리 등이 데이터이다. 객체의 동작(action)은 객체가 수행할 수 있는 행동이다. 자동차를 예로 들면 출발하기, 감속하기, 가속하기, 방향 전환하기, 변속하기 등을 생각할 수 있다. 실제 세계에서는 사물의 데이터와 동작이 분리되지 않고, 하나로 합쳐져 있다. 소프트웨어를 작성할 때도 이와 같이 데이터와 동작을 하나로 합쳐서 프로그램을 작성하는 기법이 객체 지향 프로그래밍이다.

자바스크립트에서 객체의 데이터와 동작은 각각 변수와 함수로 표현할 수 있다. 객체 안의 변수를 속성(property)이라 하고 객체 안의 함수를 메서드(method)라고 부른다. 즉 객체는 속성과 메서드로 이루어져 있는 하나의 엔터티(묶음)라 할 수 있다.

속성과 메서드는 객체 내부에 존재하며 서로 긴밀하게 연결되어 있다. 객체는 컨테이너의 개념으로 볼 수 있는데, 객체 안의 변수와 메서드는 객체가 소유한다. 객체 안의 메서드는 객체 내부의 변수를 언제든지 직접 접근하여 사용할 수 있다. 객체 안의 변수는 외부 세계로부터는 감추어져 있다.

💡 **데이터를 객체 안에 숨길 때의 장점**
데이터를 객체 안에 숨기게 되면, 데이터가 실수로 다른 객체에 의하여 변경되는 것을 방지할 수 있다.

💡 **함수와 메서드의 차이점**
함수가 객체 안에 내장되어 있으면 메서드라고 한다. 자바스크립트에서는 거의 모든 함수가 객체 안에 내장되어 있는 메서드다. 예를 들어 `alert()` 함수는 window 객체의 메서드 중 하나이다.

## 2. 객체 생성 및 사용

### 2.1 객체의 종류

자바스크립트에서 사용되는 객체를 크게 2가지로 나누면 내장 객체(built-in object)와 사용자 정의 객체(custom object)로 나눌 수 있다.

- **내장 객체** : 생성자가 미리 작성되어 있다.
- **사용자 정의 객체** : 사용자가 생성자를 정의한다.

자바스크립트에 내장된 객체는 생성자를 정의하지 않고도 사용이 가능하다. Date, Stirng, Array와 같은 객체가 내장 객체이다. 또 HTML 문서를 나타내는 객체인 document도 내장 객체라고 생각할 수 있다.

### 2.2 객체 생성 방법

자바스크립트에서 새로운 객체를 생성하는 데는 크게 나누어서 2가지의 방법이 있다.

- 객체를 객체 상수로부터 직접 생성한다.
- 생성자 함수를 이용하여 객체를 정의하고 `new`를 통하여 객체의 인스턴스를 생성한다.

### 2.3 객체 상수로부터 객체 생성

객체 상수(object literal)를 사용하여 객체를 생성해보면 다음과 같다.

```jsx
var aboutMe = {
  name: "홍길동",
  height: 180,
  age: 20,
};
```

이 방법은 간단하지만 객체를 하나만 생성할 수 있다. 추가로 객체를 생성하려면 동일한 코드를 반복해야 한다. 이런 객체를 싱글톤(singleton)이라고 부른다. 싱글톤이란 객체가 하나만 생성된다는 것을 의미한다.

### 2.4 생성자 함수를 이용한 객체 생성

사용자 정의 객체를 생성하려면 생성자(constructor)라는 특별한 함수가 필요하다. 생성자는 객체를 초기화하는 역할을 한다. 객체를 생성하는 연산자는 `new`이다.

```jsx
function Me(name, height, age) {
  this.name = name;
  this.height = height;
  this.age = age;
}
```

`this`는 코드를 실행하는 현재 객체를 의미한다. 생성자는 전달된 매개 변수값으로 현재 객체의 속성을 설정한다. `this`가 없다면 속성을 지역 변수로 혼동할 수 있기 때문에 객체 속성에는 반드시 `this`를 붙인다. 옆에 `this`가 붙은 변수는 속성이고, 앞에 this가 붙은 함수는 메서드이다.

생성자를 정의하였으면 객체는 다음과 같이 생성할 수 있다.

```jsx
var aboutMe = new Me("홍길동", 180, 20);
```

객체를 생성하려면 먼저 `new` 연산자를 쓰고 그 뒤에 생성자를 호출하는 문장을 작성하면 된다. `new` 연산자가 객체를 생성하고 생성자가 객체를 초기화한다. `new` 연산자를 생략하고 생성자만 호출하면 객체가 만들어지지 않는다. 항상 `new` 연산자를 사용해야 한다.

이 방법의 장점은 원하는 개수만큼 객체를 쉽게 만들 수 있다는 점이다. 개발 도중에 필요하지만 자바스크립트에서 지원하지 않는 객체를 생성하고 싶을 때 사용하게 된다.

## 3. 프로토타입

객체는 자신만의 데이터를 가져야 하지만 메서드나 속성은 가급적 서로 공유하는 편이 좋다. 프로토타입을 통하여 여러 객체가 공유하는 메서드 및 속성을 정의할 수 있다.

💡 객체가 소유하는 속성을 인스턴스 속성, 객체가 소유하는 메서드를 인스턴스 메서드라고 한다. 반면에 객체들 사이에서 공유되는 속성과 메서드를 각각 클래스 속성과 클래스 메서드라고도 한다.

### 3.1 프로토타입 체인

자바스크립트에서 속성이나 메서드를 참조하게 되면 다음과 같은 순서대로 찾는다.

1. 객체 안에 속성이나 메서드가 정의되어 있는지 체크
2. 객체 안에 정의되어 있지 않으면 객체의 prototype이 속성이나 메서드를 가지고 있는지 체크
3. 원하는 속성/메서드를 찾을 때까지 프로토타입 체인을 따라서 올라간다.

![prototype-chain](https://user-images.githubusercontent.com/65386533/111587789-03ced500-8806-11eb-87ad-e5df5d631784.jpg)

이러한 과정을 프로토타입 체인(prototype chain)이라고 한다. 프로토타입 객체는 개별 객체에서 시작해서 생성자의 프로토타입을 통하여 Object의 프로토타입까지 연결되어 있다.

프로토타입 체인은 **proto** 속성을 이용해 연결된다. 브라우저에 따라서 속성 이름이 다를 수 있다.

### 3.2 Object 객체

Object 객체는 자바스크립트 객체의 부모가 되는 객체이다. 자바스크립트의 모든 객체는 Object 객체를 기초로 하여 생성된다. 따라서 객체는 내부에 Object 객체의 속성과 메서드를 가지고 있다고 생각해도 좋다.

![Object](https://user-images.githubusercontent.com/65386533/111587793-04676b80-8806-11eb-9149-5412b10cb365.png)

## 4. 자바스크립트에서의 오류 처리

자바스크립트에서는 오류를 예외라는 이름으로 부른다. 예외(exception)란, "exceptional event"의 약자이다. 즉 예외는, 프로그램의 실행 중에 발생하는 이벤트라는 의미이다.

예외가 발생하는 경우는 아래와 같다.

- 개발자의 타이핑 오류로 인한 문법적인 오류
- 브라우저마다 지원하는 특징이 달라 오류 발생
- 사용자로부터 잘못된 입력 때문에 오류 발생
- 인터넷 서버 오류 때문에 오류 발생

오류가 발생했을 때 무조건 종료하는 것보다 프로그램에서 오류를 감지하여 종료를 하거나 오류를 처리한 후에 계속 실행할 수 있다면 더 나은 프로그램이 될 수 있다. 이것을 자바스크립트에서는 예외 처리(exception handling)라고 한다. 자바스크립트에서는 `try-catch` 구조를 사용해 예외를 처리할 수 있다.

### 4.1 try-catch 구조

자바스크립트에서의 예외 처리기는 try 블록과 catch 블록으로 이루어진다. try 블록에서는 예외가 발생할 수 있고, 발생된 예외는 catch 블록에서 처리한다.

```jsx
try {
  // 예외가 발생할 수 있는 코드
} catch (변수) {
  // 예외를 처리하는 코드
}
```

### 4.2 throw 문장

throw 문장은 개발자가 오류를 생성할 수 있도록 한다. 예외를 발생시키는 것을 "예외를 던진다(throw)"고 표현한다. 개발자는 자신이 어떤 기준을 정하고 그 기준에 맞지 않으면 사용자에게 경고 메시지를 줄 수 있다. 이러한 경우에 throw 문장이 try-catch 문장과 함께 사용된다. 예를 들어 사용자가 음수를 입력하면 안되는 상황에서 음수를 사용했을 때 경고 메시지를 띄우는 등의 작업이다. 이러한 상황을 예외로 처리하면 보다 깔끔해진다.

사용방법은 `throw "예외 메시지";`이다.

---

- 참조

  <HTML5+CSS3+JavaScript로 배우는 웹 프로그래밍 기초> 천인국 저.
