# JSX & 엘리먼트 렌더링

# 1. JSX

## 1.1 JSX란

JSX는 리액트에서 생김새를 정의할 때 사용하는 문법으로, HTML 같이 생겼지만 실제로는 자바스크립트의 확장 문법이다. XML과 매우 비슷하게 생겼는데, 이렇게 작성한 코드는 브라우저에서 실행되기 전에 코드가 번들링되는 과정에서 바벨을 사용하여 일반 자바스크립트 형태의 코드로 변환된다.

💡 **번들링? 바벨?**
리액트 컴포넌트를 만들 때, `import React from 'react';`를 통하여 리액트를 불러와주어야 한다. 이 import 구문을 통해 리액트 모듈을 불러와서 리액트를 사용할 수 있게 되는 것이다. 이렇게 모듈을 불러와서 사용하는 것은 사실 원래 브라우저에서는 없던 기능인데, 이러한 기능을 브라우저에서도 사용하기 위해 번들러를 사용하게 되는 것이다. **번들(bundle)** 은 '묶는다'는 뜻으로, 파일을 묶듯이 연결하는 것을 의미한다. 번들러 도구를 사용하면 모듈을 불러왔을 때 불러온 모듈을 모두 합쳐서 하나의 파일을 생성한다.

💡 **바벨(Babel)** 은 자바스크립트의 문법을 확장해주는 도구로, 아직 지원되지 않는 최신 문법이나, 편의상 사용하거나 실험적인 자바스크립트 문법들을 정식 자바스크립트 형태로 변환해줌으로써 구형 브라우저같은 환경에서도 제대로 실행할 수 있게 해주는 역할을 한다.

코드를 살펴보면,

```jsx
function App() {
  return <div>Hello React!</div>;
}
```

위와 같이 작성된 코드는 아래와 같이 변환된다.

```jsx
function App() {
  return React.createElement("div", null, "Hello React!");
}
```

확실히 일반 자바스크립트를 사용한 코드와 JSX로 작성한 코드를 비교하면 JSX를 사용한 편이 더 가독성이 높고 작성하기도 쉽다.

## 1.2 문법

### 1.2.1 표현식

JSX 안에서는 자바스크립트 표현식을 쓸 수 있다. JSX 내부에서 코드를 `{...}`로 감싸면 된다.

```jsx
const name = "Bohyun";
const element = <h1>Hello, {name}</h1>;
// element 출력화면 => "Hello, Bohyun"
```

또한 중괄호 안에는 유효한 모든 **자바스크립트 표현식**을 넣을 수 있다. 예를 들어 `2+2`, `user.firstName` 또는 `formatName(user)` 등.

더나아가, 컴파일 후에는 JSX 표현식이 정규 자바스크립트 함수 호출이 되고 자바스크립트 객체로 인식된다. 즉, JSX를 `if` 구문 및 `for` 루프 안에 사용하고, 변수 할당, 인자로서 받아들이고, 함수로부터의 반환 등의 작업을 할 수 있다.

### 1.2.2 속성 정의

속성(attribute)에 따옴표를 이용해 문자열 리터럴을 정의할 수 있다.

`const element = <div tabIndex="0"></div>;`

중괄호를 사용하여 속성에 자바스크립트 표현식을 삽입할 수도 있다.

`const element = <img src={user.avatarUrl}></img>;`

⚠ **속성에 자바스크립트 표현식을 삽입할 때 중괄호 주변에 따옴표를 입력하면 안된다.**
따옴표(문자열 값에 사용) 또는 중괄호(표현식에 사용) 중 하나만 사용하고, 동일한 속성에 두 가지를 동시에 사용하면 안됨.

⚠ JSX는 HTML보다는 자바스크립트에 가깝기 때문에, HTML 속성 이름이나 CSS 속성 이름 대신 **camelCase** 프로퍼티 명명 규칙을 사용한다. 예를 들어, JSX에서 `class`는 `className`이 되고, `tabindex`는 `tabIndex`가 되고, `background-color`처럼 -로 구분되어 있는 이름들은 `backgroundColor`처럼 네이밍해줘야 한다.

### 1.2.3 자식 정의, 꼭 닫히고, 감싸져야 하는 태그

태그가 비어있다면 `/>`를 이용해 바로 닫아주어야 한다. HTML 에서는 `input` 또는 `br` 태그를 사용 할 때 닫지 않고 사용하기도 하지만 리액트에서는 그렇게 하면 안된다.

또한 아래 코드와 같이 자식을 포함할 수 있다.

```jsx
const element = (
  <div>
    <h1>Hello!</h1>
    <h2>Good to see you here.</h2>
  </div>
);
```

만약, 위 코드와 같이 `<div>` 태그로 감싸주지 않는다면, 아래 이미지와 같은 오류가 발생한다.

![error](https://user-images.githubusercontent.com/65386533/111900056-a50e9300-8a73-11eb-8b4e-cae8cf782088.png)

💡 **리액트 컴포넌트에서 요소 여러 개를 왜 하나의 요소로 꼭 감싸주어야 할까?**
이는 Virtual DOM에서 컴포넌트의 변화를 감지해 낼 때 효율적으로 비교할 수 있도록 컴포넌트의 내부는 하나의 DOM 트리 구조로 이루어져야 한다는 규칙이 있기 때문이다.

### 1.2.4 주석

JSX 내부의 주석은 `{/* 이런 형태로 */}` 작성한다.
그리고 열리는 태그 내부에서 `// 이런 형태로도` 주석 작성이 가능하다.

만약 일반 자바스크립트에서 주석을 작성할 때처럼 아무 데나 주석을 작성하면 그 주석은 페이지에 그대로 나온다.

```jsx
function App() {
  const name = "react";
  return (
    <>
      {/* 이 주석은 화면에 보이지 않습니다 */}
      <div
        className="react" // 열리는 태그 내부에서는 이렇게 주석을 작성 할 수 있습니다.
      >
        {name}
      </div>
      // 하지만 이런 주석이나 /* 이런 주석은 페이지에 그대로 나타납니다 */
    </>
  );
}
```

# 2. 엘리먼트 렌더링

## 2.1 엘리먼트

엘리먼트는 React 앱의 가장 작은 단위이다. 엘리먼트는 화면에 표시할 내용을 기술한다.

브라우저 DOM 엘리먼트와는 달리 React 엘리먼트는 일반 객체(plain object)이며, 쉽게 생성할 수 있다. React DOM은 React 엘리먼트와 일치하도록 DOM을 업데이트한다.

💡 더 널리 알려진 개념인 "컴포넌트"와 엘리먼트를 혼동할 수 있는데, **엘리먼트는 컴포넌트의 "구성 요소"이다!** 즉, 컴포넌트의 하위 개념이라고 생각하면 된다.

## 2.2 DOM에 엘리먼트 렌더링하기

`<div id="root"></div>` 라는 `<div>`가 있을 때, 이 안에 들어가는 모든 엘리먼트를 React DOM에서 관리하기 때문에 이것을 "루트(=뿌리)" DOM 노드라고 부른다. React로 구현된 어플리케이션은 일반적으로 하나의 루트 DOM 노드가 있다.

## 2.3 렌더링된 엘리먼트 업데이트하기

React 엘리먼트는 불변객체이다. 엘리먼트를 생성한 이후에는 해당 엘리먼트의 자식이나 속성을 변경할 수 없다. 엘리먼트는 영화에서 하나의 프레임과 같이 특정 시점의 UI를 보여준다.

## 2.4 변경된 부분만 업데이트하기

React DOM은 해당 엘리먼트와 그 자식 엘리먼트를 이전의 엘리먼트와 비교하고 DOM을 원하는 상태로 만드는데 필요한 경우에만 DOM을 업데이트한다.

## +) Virtual DOM이란?

리액트의 주요 특징 중 하나는 Virtual DOM을 사용한다는 것이다.

Virtual DOM 은 가상의 DOM으로 브라우저에 실제로 보여지는 DOM이 아니라 그냥 메모리에 가상으로 존재하는 DOM으로서 그냥 자바스크립트 객체이기 때문에 작동 성능이 실제로 브라우저에서 DOM을 보여주는 것 보다 속도가 훨씬 빠르다. 리액트는 상태가 업데이트 되면, 업데이트가 필요한 곳의 UI를 Virtual DOM을 통해서 렌더링하고, 그리고 나서 실제 브라우저에 보여지고 있는 DOM과 비교를 한 후, 차이가 있는 곳을 감지하여 이를 실제 DOM에 패치시켜준다.

---

- 참조

  [https://ko.reactjs.org/docs/introducing-jsx.html](https://ko.reactjs.org/docs/introducing-jsx.html)

  [https://react.vlpt.us/basic/04-jsx.html](https://react.vlpt.us/basic/04-jsx.html)

  https://react.vlpt.us/basic/03-first-component.html

  [https://react.vlpt.us/basic/01-concept.html](https://react.vlpt.us/basic/01-concept.html)
